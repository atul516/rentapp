<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Flat Rent Manager</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body>

  <!-- New Flat Entry -->
  <section class="collapsible">
    <div class="section-header" onclick="toggleSection(this)">
      <h2>New Flat Entry</h2>
      <span class="toggle-arrow">▼</span>
    </div>
    <div class="section-body">
      <input id="flatNum" placeholder="Flat Number" />
      <input id="location" placeholder="Location" />
      <input id="rent" placeholder="Rent" />
      <input id="tenant" placeholder="Tenant Name" />
      <button onclick="addFlat()">Add Flat</button>
      <h4>Existing Flats:</h4>
      <ul id="existing-flats"></ul>
    </div>
  </section>

  <!-- Update Rent -->
  <section class="collapsible">
    <div class="section-header" onclick="toggleSection(this)">
      <h2>Update Rent</h2>
      <span class="toggle-arrow">▼</span>
    </div>
    <div class="section-body">
      <select id="rent-flat-select"></select>
      <input id="new-rent" placeholder="New Rent" />
      <button onclick="updateRent()">Update Rent</button>
    </div>
  </section>

  <!-- Update Tenant -->
  <section class="collapsible">
    <div class="section-header" onclick="toggleSection(this)">
      <h2>Update Tenant Name</h2>
      <span class="toggle-arrow">▼</span>
    </div>
    <div class="section-body">
      <select id="tenant-flat-select"></select>
      <input id="new-tenant" placeholder="New Tenant Name" />
      <button onclick="updateTenant()">Update</button>
    </div>
  </section>

  <!-- Electricity Reading -->
  <section class="collapsible">
    <div class="section-header" onclick="toggleSection(this)">
      <h2>Electricity Reading Entry</h2>
      <span class="toggle-arrow">▼</span>
    </div>
    <div class="section-body">
      <select id="reading-flat-select" onchange="fetchPreviousReading()"></select>
      <input id="month" placeholder="Month (YYYY-MM)" onblur="fetchPreviousReading()" />
      <input id="reading" placeholder="New Reading" />
      <div>Previous Reading: <span id="previous-reading">-</span></div>
      <button onclick="addReading()">Add Reading</button>
    </div>
  </section>

  <!-- Electricity Rate -->
  <section class="collapsible">
    <div class="section-header" onclick="toggleSection(this)">
      <h2>Electricity Rate</h2>
      <span class="toggle-arrow">▼</span>
    </div>
    <div class="section-body">
      <input id="rate-month" placeholder="Month (YYYY-MM)" />
      <input id="rate-value" placeholder="Rate per Unit (₹)" />
      <button onclick="addRate()">Save Rate</button>
    </div>
  </section>

  <!-- Generate Total Charges Report -->
  <section class="collapsible">
    <div class="section-header" onclick="toggleSection(this)">
      <h2>Generate Total Charges Report</h2>
      <span class="toggle-arrow">▼</span>
    </div>
    <div class="section-body">
      <select id="report-flat-select"></select>
      <input id="report-month" placeholder="Month (YYYY-MM)" />
      <input id="maintenance" placeholder="Maintenance Charges" />
      <button onclick="generateReport()">Generate & Download Report</button>
      <div id="report-preview" style="margin-top: 20px;"></div>
    </div>
  </section>

  <script src="script.js"></script>
</body>
</html>
